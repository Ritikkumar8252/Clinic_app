{% extends "base.html" %}
{% block body %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/setting.css') }}">

<div class="settings-page">

    <div class="settings-container">

        <!-- Sidebar -->
        <div class="settings-sidebar">
            <h3><i class="bi bi-gear-fill"></i> Settings</h3>

            <button class="tab-btn active" onclick="switchTab('profile', this)">Profile</button>
            <button class="tab-btn" onclick="switchTab('gov-docs', this)">Documents</button>
            <button class="tab-btn" onclick="switchTab('account', this)">Account</button>
            <button class="tab-btn" onclick="switchTab('subscription', this)">Subscription</button>
            <button class="tab-btn" onclick="switchTab('clinic', this)">Clinic</button>
            <button class="tab-btn" onclick="switchTab('theme', this)">Theme</button>

        </div>



        <!-- Right Content -->
        <div class="settings-content">

            <!-- Profile -->
            <div id="profile" class="tab active">
                <div class="card">
                    <h2>My Profile</h2>

                    <div class="profile-header">
                        <img src="{{ url_for('static', filename= user.profile_photo or 'doctor.png') }}" class="profile-img">
                        <div>
                            <p class="name">{{ user.fullname }}</p>
                            
                        </div>
                    </div>

                    <form method="POST" enctype="multipart/form-data">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

                        <input type="hidden" name="update_profile">

                        <label>Full Name</label>
                        <input type="text" name="fullname" value="{{ user.fullname }}" required>

                        <label>Email</label>
                        <input type="email" name="email" value="{{ user.email }}" required>

                        <label>Phone</label>
                        <input type="text" name="phone" value="{{ user.phone or '' }}">

                        <label>Profile Photo</label>
                        <input type="file" name="profile_photo">

                        <button class="btn-primary">Save Profile</button>
                    </form>
                </div>
            </div>



            <!-- Government Documents -->
           <div id="gov-docs" class="tab">
                <div class="card">
                    <h2>Government & Medical Documents</h2>

                    <form method="POST" enctype="multipart/form-data">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

                        <input type="hidden" name="upload_docs">

                        <!-- Aadhar -->
                        <label>Aadhar Card</label>
                        {% if user.aadhar %}
                            <div class="doc-row">
                                <span class="uploaded-badge">Uploaded</span>
                                <a href="{{ url_for('static', filename=user.aadhar) }}" target="_blank" class="btn-view">View</a>
                                <input type="file" name="aadhar" class="file-replace">
                            </div>
                        {% else %}
                            <input type="file" name="aadhar">
                        {% endif %}

                        <!-- MRC -->
                        <label>MCI / MRC Certificate</label>
                        {% if user.mrc_certificate %}
                            <div class="doc-row">
                                <span class="uploaded-badge">Uploaded</span>
                                <a href="{{ url_for('static', filename=user.mrc_certificate) }}" target="_blank" class="btn-view">View</a>
                                <input type="file" name="mrc" class="file-replace">
                            </div>
                        {% else %}
                            <input type="file" name="mrc">
                        {% endif %}

                        <!-- Clinic License -->
                        <label>Clinic License</label>
                        {% if user.clinic_license %}
                            <div class="doc-row">
                                <span class="uploaded-badge">Uploaded</span>
                                <a href="{{ url_for('static', filename=user.clinic_license) }}" target="_blank" class="btn-view">View</a>
                                <input type="file" name="clinic_license" class="file-replace">
                            </div>
                        {% else %}
                            <input type="file" name="clinic_license">
                        {% endif %}

                        <button class="btn-primary">Save Documents</button>
                    </form>
                </div>
            </div>



            <!-- Account Security -->
            <div id="account" class="tab">
                <div class="card">
                    <h2>Account Security</h2>

                    <form method="POST">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

                        <input type="hidden" name="change_password">

                        <label>Old Password</label>
                        <input type="password" name="old_password" required>

                        <label>New Password</label>
                        <input type="password" name="new_password" required>

                        <button class="btn-primary">Update Password</button>
                    </form>

                    <hr>

                    <h3>Danger Zone</h3>
                    <button class="btn-danger">Delete Account</button>
                </div>
            </div>



            <!-- Subscription -->
            <div id="subscription" class="tab">
                <div class="card">
                    <h2>Subscription</h2>

                    <p><strong>Current Plan:</strong> Free Trial</p>

                    <div class="plans-container">
                        <div class="plan-card">
                            <h4>Basic</h4>
                            <p>₹199 / month</p>
                            <button class="btn-select">Choose</button>
                        </div>

                        <div class="plan-card">
                            <h4>Pro</h4>
                            <p>₹499 / month</p>
                            <button class="btn-select">Choose</button>
                        </div>

                        <div class="plan-card">
                            <h4>Clinic+</h4>
                            <p>₹999 / month</p>
                            <button class="btn-select">Choose</button>
                        </div>
                    </div>
                </div>
            </div>



            <!-- Clinic -->
            <div id="clinic" class="tab">
                <div class="card">
                    <h2>Clinic Details</h2>

                    <form >
                        <input type="hidden" name="clinic_save">

                        <label>Clinic Name</label>
                        <input type="text" name="clinic_name" value="{{ user.clinic_name }}">

                        <label>Speciality</label>
                        <input type="text" name="speciality" value="{{ user.speciality }}">

                        <label>Phone</label>
                        <input type="text" name="clinic_phone" value="{{ user.clinic_phone }}">

                        <label>Address</label>
                        <textarea name="clinic_address">{{ user.clinic_address }}</textarea>

                        <button class="btn-primary">Save Clinic Settings</button>
                    </form>
                </div>
            </div>



            <!-- Theme -->
            <div id="theme" class="tab">
                <div class="card">
                    <h2>Theme</h2>

                    <form method="POST">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

                        <label>Select Theme</label>
                        <select name="theme">
                            <option value="light" {% if session.get('theme')=='light' %}selected{% endif %}>Light</option>
                            <option value="dark" {% if session.get('theme')=='dark' %}selected{% endif %}>Dark</option>
                        </select>

                        <button class="btn-primary">Apply</button>
                    </form>
                </div>
            </div>

        </div>
    </div>
</div>


<script src="{{ url_for('static', filename='js/settings/settings_tabs.js') }}"></script>

{% endblock %}
