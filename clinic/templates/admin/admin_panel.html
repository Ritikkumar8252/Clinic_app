{% extends "base.html" %}
{% block body %}

<h2 class="page-title">Admin Dashboard</h2>

<!-- STATS BOXES -->
<div class="stats-grid">

    <div class="stat-card blue">
        <h3>{{ total_users }}</h3>
        <p>Total Users</p>
    </div>

    <div class="stat-card green">
        <h3>{{ total_patients }}</h3>
        <p>Total Patients</p>
    </div>

    <div class="stat-card yellow">
        <h3>{{ total_appointments }}</h3>
        <p>Total Appointments</p>
    </div>

    <div class="stat-card red">
        <h3>{{ total_invoices }}</h3>
        <p>Total Invoices</p>
    </div>

</div>

<!-- USERS TABLE -->
<h4 class="section-title">User Accounts</h4>

<table class="styled-table">
    <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Role</th>
            <th style="width:180px;">Actions</th>
        </tr>
    </thead>

    <tbody>
        {% for u in users %}
        <tr>
            <td>{{ u.id }}</td>
            <td>{{ u.fullname }}</td>
            <td>{{ u.email }}</td>
            <td>{{ u.role }}</td>

            <td class="actions">
                <a href="{{ url_for('admin_bp.edit_user', id=u.id) }}" class="btn-edit">Edit</a>

                {% if u.email != 'admin@gmail.com' %}
                <a href="{{ url_for('admin_bp.delete_user', id=u.id) }}"
                   class="btn-delete"
                   onclick="return confirm('Delete this user?');">
                    Delete
                </a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
