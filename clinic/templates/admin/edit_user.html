{% extends "base.html" %}
{% block body %}

<h2 class="page-title">Edit User</h2>

<div class="form-container">

    <form method="POST" action="{{ url_for('admin_bp.edit_user', id=user.id) }}">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

        <label>Full Name</label>
        <input type="text" name="fullname" value="{{ user.fullname }}" required>

        <label>Email</label>
        <input type="email" name="email" value="{{ user.email }}" required>

        <label>Role</label>

        {% if user.role == "admin" %}
            <!-- ADMIN ROLE LOCK -->
            <select name="role" disabled>
                <option value="admin" selected>Admin</option>
            </select>

            <!-- hidden input so value still submits -->
            <input type="hidden" name="role" value="admin">

            <p style="color:red;font-size:12px;margin-top:6px;">
                Admin role cannot be changed
            </p>
        {% else %}
            <select name="role" required>
                <option value="doctor" {% if user.role=='doctor' %}selected{% endif %}>Doctor</option>
                <option value="reception" {% if user.role=='reception' %}selected{% endif %}>RECEPTIONIST</option>
            </select>
        {% endif %}

        <button class="btn-primary" type="submit" style="margin-top:12px;">
            Update User
        </button>

    </form>

</div>

{% endblock %}
