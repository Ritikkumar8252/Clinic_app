{% extends "base.html" %}
{% block body %}

<div class="settings-page">

    <div class="settings-container">

        <!-- Sidebar -->
        <div class="settings-sidebar">
            <h3><i class="bi bi-gear-fill"></i> Settings</h3>

            <button class="tab-btn active" onclick="switchTab('profile')"><i class="bi bi-person"></i> Profile</button>
            <button class="tab-btn" onclick="switchTab('gov-docs')"><i class="bi bi-file-earmark-text"></i> Documents</button>
            <button class="tab-btn" onclick="switchTab('account')"><i class="bi bi-shield-lock"></i> Account</button>
            <button class="tab-btn" onclick="switchTab('subscription')"><i class="bi bi-credit-card"></i> Subscription</button>
            <button class="tab-btn" onclick="switchTab('clinic')"><i class="bi bi-hospital"></i> Clinic</button>
            <button class="tab-btn" onclick="switchTab('theme')"><i class="bi bi-sun"></i> Theme</button>
        </div>



        <!-- Right Content -->
        <div class="settings-content">

            <!-- Profile -->
            <div id="profile" class="tab active">
                <div class="card">
                    <h2>My Profile</h2>

                    <div class="profile-header">
                        <img src="{{ url_for('static', filename='doctor.png') }}" class="profile-img">
                        <div>
                            <p class="name">{{ user.fullname }}</p>
                            
                        </div>
                    </div>

                    <form method="POST" enctype="multipart/form-data">
                        <input type="hidden" name="update_profile">

                        <label>Full Name</label>
                        <input type="text" name="fullname" value="{{ user.fullname }}" required>

                        <label>Email</label>
                        <input type="email" name="email" value="{{ user.email }}" required>

                        <label>Phone</label>
                        <input type="text" name="phone" value="{{ user.phone or '' }}">

                        <label>Profile Photo</label>
                        <input type="file" name="profile_photo">

                        <button class="btn-primary">Save Profile</button>
                    </form>
                </div>
            </div>



            <!-- Government Documents -->
            <div id="gov-docs" class="tab">
                <div class="card">
                    <h2>Government & Medical Documents</h2>

                    <form method="POST" enctype="multipart/form-data">
                        <input type="hidden" name="upload_docs">

                        <label>Aadhar Card</label>
                        <input type="file" name="aadhar">

                        <label>MCI / MRC Certificate</label>
                        <input type="file" name="mrc">

                        <label>Clinic License</label>
                        <input type="file" name="clinic_license">

                        <button class="btn-primary">Upload Documents</button>
                    </form>
                </div>
            </div>



            <!-- Account Security -->
            <div id="account" class="tab">
                <div class="card">
                    <h2>Account Security</h2>

                    <form method="POST">
                        <input type="hidden" name="change_password">

                        <label>Old Password</label>
                        <input type="password" name="old_password" required>

                        <label>New Password</label>
                        <input type="password" name="new_password" required>

                        <button class="btn-primary">Update Password</button>
                    </form>

                    <hr>

                    <h3>Danger Zone</h3>
                    <button class="btn-danger">Delete Account</button>
                </div>
            </div>



            <!-- Subscription -->
            <div id="subscription" class="tab">
                <div class="card">
                    <h2>Subscription</h2>

                    <p><strong>Current Plan:</strong> Free Trial</p>

                    <div class="plans-container">
                        <div class="plan-card">
                            <h4>Basic</h4>
                            <p>₹199 / month</p>
                            <button class="btn-select">Choose</button>
                        </div>

                        <div class="plan-card">
                            <h4>Pro</h4>
                            <p>₹499 / month</p>
                            <button class="btn-select">Choose</button>
                        </div>

                        <div class="plan-card">
                            <h4>Clinic+</h4>
                            <p>₹999 / month</p>
                            <button class="btn-select">Choose</button>
                        </div>
                    </div>
                </div>
            </div>



            <!-- Clinic -->
            <div id="clinic" class="tab">
                <div class="card">
                    <h2>Clinic Details</h2>

                    <form method="POST">
                        <input type="hidden" name="clinic_save">

                        <label>Clinic Name</label>
                        <input type="text" name="clinic_name" value="{{ clinic.clinic_name }}">

                        <label>Speciality</label>
                        <input type="text" name="speciality" value="{{ clinic.speciality }}">

                        <label>Phone</label>
                        <input type="text" name="clinic_phone" value="{{ clinic.phone }}">

                        <label>Address</label>
                        <textarea name="clinic_address">{{ clinic.address }}</textarea>

                        <button class="btn-primary">Save Clinic Settings</button>
                    </form>
                </div>
            </div>



            <!-- Theme -->
            <div id="theme" class="tab">
                <div class="card">
                    <h2>Theme</h2>

                    <form method="POST">
                        <label>Select Theme</label>
                        <select name="theme">
                            <option value="light" {% if session.get('theme')=='light' %}selected{% endif %}>Light</option>
                            <option value="dark" {% if session.get('theme')=='dark' %}selected{% endif %}>Dark</option>
                        </select>

                        <button class="btn-primary">Apply</button>
                    </form>
                </div>
            </div>

        </div>
    </div>
</div>




<script>
function switchTab(tabName) {
    document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
    document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
    document.getElementById(tabName).classList.add("active");
    event.target.classList.add("active");
}
</script>

{% endblock %}
